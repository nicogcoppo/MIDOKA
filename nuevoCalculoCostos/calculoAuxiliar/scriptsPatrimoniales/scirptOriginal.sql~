SELECT ROUND(t1.STOCK,0) AS 'STOCK',ROUND(t2.CLIENTES,0) AS 'CLIENTES',ROUND(t4.CAJA,0) AS 'LIQUIDEZ',ROUND(t3.PROVEEDOR,0) AS 'PROVEEDORs',ROUND((t1.STOCK + t2.CLIENTES +t4.CAJA - t3.PROVEEDOR),0) AS PATRIMONIO FROM (SELECT 'ACTUAL' AS ACTUAL,SUM((IFNULL(CANTIDAD_CST,0) + IFNULL(CANTIDAD_ING,0) + IFNULL(CANTIDAD_DEVOL,0) - IFNULL(CANTIDAD_EGR,0) - IFNULL(CANTIDAD_AR,0)) * CANTIDAD_MINIMA * IF(IFNULL(PRECIO_A,0) > IFNULL(PRECIO_B,0),IFNULL(PRECIO_A,0) * (1 - (DESCUENTO / 100)),IFNULL(PRECIO_B,0) * (1 - (DESCUENTO / 100)))) AS 'STOCK' FROM ARMADO JOIN (RUBRO,CATEGORIA,MODELO,MOTIVO,PROOVEDOR,PRECIOS,ARTICULOS) ON (RUBRO.ruID=PRECIOS.RUBRO_pr AND CATEGORIA.claID=PRECIOS.CATEGORIA_pr AND MODELO.mdID=PRECIOS.MODELO_pr AND PROOVEDOR.pooID=PRECIOS.PROOVEDOR AND ARTICULOS.RUBRO=PRECIOS.RUBRO_pr AND ARTICULOS.CATEGORIA=PRECIOS.CATEGORIA_pr AND ARTICULOS.MODELO=PRECIOS.MODELO_pr AND ARTICULOS.artID=ARMADO.ID_ARTICULO_AR AND ARTICULOS.MOTIVO=MOTIVO.mtID)) t1 JOIN(SELECT 'ACTUAL' AS ACTUAL,SUM(IFNULL(DEBE,0) - IFNULL(HABER,0) - IFNULL(DEVOLUCION,0) - IFNULL(PERDIDAS,0)) AS 'CLIENTES' FROM CUENTA_CORRIENTE) t2 ON(t1.ACTUAL=t2.ACTUAL) JOIN(SELECT 'ACTUAL' AS ACTUAL,SUM(IFNULL(DEBE,0) - IFNULL(HABER,0)) AS 'PROVEEDOR' FROM SALDO_PROOVEDOR) t3 ON(t1.ACTUAL=t3.ACTUAL) JOIN((SELECT 'ACTUAL' AS ACTUAL,REGISTRO AS CAJA FROM CONTABLES WHERE TIPO_REGISTRO=5 ORDER BY contablesID DESC LIMIT 1)) t4 ON(t1.ACTUAL=t4.ACTUAL);
